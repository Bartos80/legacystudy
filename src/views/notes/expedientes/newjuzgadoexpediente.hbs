<script>
  function ShowName(name) {
    const input = document.getElementById(name);
    const words = input.value.trim().split(" ");
    const formatted = words.map(w => w.charAt(0).toUpperCase() + w.slice(1).toLowerCase()).join(" ");
    input.value = formatted;
  }

  function ponerMayuscula(id) {
    const input = document.getElementById(id);
    input.value = input.value.toUpperCase();
  }

  function ponerminuscula(id) {
    const input = document.getElementById(id);
    input.value = input.value.toLowerCase();
  }

  // Make sure this runs after the page loads, e.g., inside $(document).ready() if using jQuery
  $(document).ready(function () {
    $('#idcliente').select2({
      placeholder: "Buscar Cliente...",
      allowClear: true // Optional: allows the user to clear the selection
    });
  });

</script>

<div class="container my-5">
  <div class="col-md-8 mx-auto">
    <div class="card shadow-sm border-0">
      <div class="card-body p-4">
        <h3 class="text-center text-primary mb-4 fw-bold">Expediente con Juzgado</h3>

        <form action="/notes/newjuzgadoexpediente" method="POST">

          <!-- Juzgado -->
          {{!-- <p> {{juzgados}}</p> --}}
          {{!-- <div class="mb-3">
            <label for="juzgado" class="form-label">Juzgado</label>
            <input type="text" id="juzgado" name="juzgado" class="form-control" placeholder="Ej: Juzgado Civil Nº 3">
          </div> --}}
          <!-- Juzgado (MODIFICADO A SELECT) -->
          {{!-- <div class="mb-3">
            <label for="numjuzgado" class="form-label fw-semibold">Juzgado</label>
            <select id="numjuzgado" name="numjuzgado" class="form-select shadow-sm" required>
              <option value="">Cargando Juzgados...</option>
              <!-- Opciones cargadas por la función populateJuzgados() -->
            </select>
          </div> --}}
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 pt-4 border-t border-gray-200">


            <div id="resultsContainer">


              <!-- Nº Expediente -->
              <div class="mb-3">
                <label style="color:gray" for="_id" class="form-label">Id_Expediente: {{expediente._id}}</label>
                <input type="hidden" id="idexpediente" name="idexpediente" class="form-control"
                  placeholder="{{expediente._id}}">
              </div>
              <div class="mb-3">
                <label for="numexpediente" class="form-label">N° Expediente</label>
                <input type="text" id="numexpediente" name="numexpediente" class="form-control"
                  placeholder="{{expediente.numexpediente}}" disabled>
              </div>

              <!-- Caratula -->
              <div class="mb-3">
                <label for="caratula" class="form-label">Carátula</label>
                <input type="text" id="caratula" name="caratula" class="form-control"
                  placeholder="{{expediente.caratula}}" disabled>
              </div>

              <!-- Tipo -->
              <div class="mb-3">
                <label for="partes" class="form-label">Partes</label>
                <input type="text" id="partes" name="partes" class="form-control" placeholder="{{expediente.partes}}"
                  disabled>
              </div>

              <div>
                <select name="idjuzgado" id="idjuzgado"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white">
                  <option value="">- Juzgado (Opcional) -</option>
                  {{#each juzgado}}
                  <option value="{{_id}}">{{numjuzgado}} (Provincia: {{provinciajuzgado}})</option>
                  {{/each}}
                </select>
              </div>
              <p></p>
              <div class="col-md-12">
                <label class="form-label fw-semibold">Foto del Expediente</label><br />
                {{#if expediente.fotoexpediente}}
                <img src="{{expediente.fotoexpediente}}" class="img-thumbnail mt-2" style="max-width: 200px;"
                  alt="Foto del Expediente">
                {{else}}
                <p class="text-muted mt-2">Sin imagen disponible</p>
                {{/if}}
              </div>
              <p></p>
              <!-- Botón guardar -->
              <div class="d-grid mb-3">
                <button type="submit" class="btn btn-primary">Guardar Juzgado vinculado a Expediente</button>
              </div>

              <p></p>

              <!-- Volver -->
              <div class="text-center mt-4">
                <a href="javascript:window.history.back()"
                  class="btn btn-outline-danger d-inline-flex align-items-center gap-2 px-4 py-2 shadow-sm"
                  style="font-weight: bold;">
                  <i class="fas fa-times-circle"></i>
                  Volver Atrás
                </a>
              </div>
        </form>
      </div>
    </div>
  </div>
</div>


{{!-- <label for="idjuzgado" class="block text-sm font-medium text-gray-700 mb-1">Cliente</label>
<div>
  <select name="idjuzgado" id="idjuzgado"
    class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white">
    <option value="" disabled>- Cliente -</option>
    {{#each clientes}}
    <option value="{{_id}}">{{nyacliente}}</option>
    {{/each}}
  </select>
</div>
<p></p>
<label for="idjuzgado" class="block text-sm font-medium text-gray-700 mb-1">Abogado Asignado</label>
<div>
  <select name="idjuzgado" id="idjuzgado"
    class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white">
    <option value="" disabled>- Abogados -</option>
    {{#each abogados}}
    <option value="{{_id}}">{{nyaabogado}}</option>
    {{/each}}
  </select>
</div>
<p></p>
<label for="idjuzgado" class="block text-sm font-medium text-gray-700 mb-1">Juzgado Asignado
  (Opcional)</label>
<div>
  <select name="idjuzgado" id="idjuzgado"
    class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white">
    <option value="" disabled>- Juzgado -</option>
    {{#each juzgados}}
    <option value="{{_id}}">{{numjuzgado}} (Provincia: {{provinciajuzgado}})</option>
    {{/each}}
  </select>
</div>
</div>
</div>
<p></p>
<!-- Secretaría -->
<div class="mb-3">
  <label for="secretaria" class="form-label">Secretaría</label>
  <input type="text" id="secretaria" name="secretaria" class="form-control" placeholder="Ej: Secretaría B">
</div> --}}