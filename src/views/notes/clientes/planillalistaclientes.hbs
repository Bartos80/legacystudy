<div class="container my-5">

  <!-- Encabezado + botones -->
  <div class="d-flex justify-content-between flex-column flex-md-row align-items-start align-items-md-center gap-3 mb-4">
    <h5 class="fw-bold text-primary text-uppercase m-0">ðŸ“‹ Listado de Clientes</h5>
    <div class="d-flex flex-wrap gap-2 mt-2">
      <a href="/clientes/add" class="btn btn-success btn-sm mr-4">+ Agregar Cliente</a>
      <a href="/clientes/listado" class="btn btn-outline-warning btn-sm">â†» Recargar</a>
    </div>
  </div>

  <!-- Formularios de bÃºsqueda -->
  <div class="row g-3 mb-4">
    <div class="col-sm-6 col-md-3">
      <form action="/clientes/findnombrecliente" method="POST">
        <input type="search" name="namecliente" class="form-control" placeholder="Buscar por nombre..." />
        <button title="Buscar Nombre" class="btn btn-outline-secondary w-100 mt-2 btn-sm" type="submit">Buscar</button>
      </form>
    </div>    
    <div class="col-sm-6 col-md-3">
      <form action="/clientes/findlistadni" method="POST">
        <input type="search" name="dnicliente" class="form-control" placeholder="Buscar por DNI..." />
        <button title="Buscar DNI" class="btn btn-outline-secondary w-100 mt-2 btn-sm" type="submit">Buscar</button>
      </form>
    </div>
    <div class="col-sm-6 col-md-3">
      <form action="/clientes/findlistafechaentrada" method="POST">
        <input type="search" name="date" class="form-control" placeholder="Buscar por fecha alta..." />
        <button title="Buscar Fecha Alta" class="btn btn-outline-secondary w-100 mt-2 btn-sm" type="submit">Buscar</button>
      </form>      
    </div>
    <div class="col-sm-6 col-md-3">
      <form action="/clientes/findlocalidadcliente" method="POST">
        <input type="search" name="localidadcliente" class="form-control" placeholder="Buscar por localidad..." />
        <button title="Buscar Localidad" class="btn btn-outline-secondary w-100 mt-2 btn-sm" type="submit">Buscar</button>
      </form>
    </div>
  </div>

  <!-- Tabla responsiva de clientes -->
  {{#if clientes.length}}
    <div class="table-responsive rounded shadow-sm border">
      <table class="table table-striped table-bordered align-middle text-nowrap">
        <thead class="table-primary text-dark text-center">
          <tr>
            <th>Nombre / Apellido</th>
            <th>D.N.I.</th>
            <th>TelÃ©fono</th>
            <th>Email</th>
            <th>Localidad</th>
            <th>Opciones</th>
            <th>MÃ¡s</th>
          </tr>
        </thead>
        <tbody>
          {{#each clientes}}
            <tr>
              <td class="text-capitalize">{{ nyacliente }}</td>
              <td>{{ dnicliente }}</td>
              <td>{{ telefonocliente }}</td>
              <td class="text-lowercase text-warning fw-bold">{{ emailcliente }}</td>
              <td class="text-capitalize">{{ localidadcliente }}</td>
              <td>
                <div class="d-flex flex-column gap-1">
                  <a href="/clientes/add/{{_id}}" class="btn btn-outline-danger btn-sm w-100">+ Expediente</a>
                  <a href="/clientes/list/{{_id}}" class="btn btn-outline-info btn-sm w-100">Info Cliente</a>
                </div>
              </td>
              <td>
                <div class="d-flex flex-column gap-1">
                  <a href="/clientes/edit/{{_id}}" class="btn btn-outline-warning btn-sm w-100">Editar</a>
                  <form action="/clientes/marcadelete/{{_id}}?_method=PUT" method="POST"
                    onsubmit="return confirm('Â¿Desea enviar a la papelera?')">
                    <button class="btn btn-outline-danger btn-sm w-100" type="submit">Papelera</button>
                  </form>
                </div>
              </td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  {{else}}
    <div class="alert alert-warning text-center mt-5" role="alert">
      ðŸš« No existen clientes registrados.
    </div>
  {{/if}}
</div>
