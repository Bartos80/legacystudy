<div class="container my-5">

  <!-- Encabezado + botones -->
  <div
    class="d-flex justify-content-between flex-column flex-md-row align-items-start align-items-md-center gap-3 mb-4">
    <h5 class="fw-bold text-primary text-uppercase m-0">ðŸ“‹ Listado de expedientes</h5>
    <div class="d-flex flex-wrap gap-2 mt-2">
      <a href="/expedientes/add" class="btn btn-success btn-sm mr-4">+ Agregar Expediente</a>
      <a href="/expedientes/listado" class="btn btn-outline-warning btn-sm">â†» Recargar</a>
    </div>
  </div>

  <!-- Formularios de bÃºsqueda -->
  <div class="row g-3 mb-4">
    <div class="col-sm-6 col-md-3">
      <form action="/expedientes/findjuzgado" method="POST">
        <input type="search" class="form-control" name="juzgado" placeholder="Buscar Juzgado..." autofocus />
        <div class="form-group">
          <button title="buscar Juzgado" class="btn btn-outline-secondary w-100 mt-2 btn-sm" type="submit">
            Buscar
          </button>
        </div>
      </form>
    </div>
    <div class="col-sm-6 col-md-3">
      <form action="/expedientes/findsecretaria" method="POST">
        <input type="search" class="form-control" name="adremaexp" placeholder="Buscar Secretaria..." autofocus />
        <div class="form-group">
          <button title="buscar SecretarÃ­a" class="btn btn-outline-secondary w-100 mt-2 btn-sm" type="submit">
            Buscar
          </button>
        </div>
      </form>
    </div>
    <div class="col-sm-6 col-md-3">
      <form action="/expedientes/find" method="POST">
        <input type="search" class="form-control" name="numexpediente" placeholder="Buscar Expediente..." autofocus />
        <div class="form-group">
          <button title="buscar Expediente" class="btn btn-outline-secondary w-100 mt-2 btn-sm" type="submit">
            Buscar
          </button>
        </div>
      </form>
    </div>
    <div class="col-sm-6 col-md-3">
      <form action="/expedientes/findultimanotificacion" method="POST">
        <input type="search" class="form-control" name="ultimanotificacion" placeholder="Buscar Ultima Notif..."
          autofocus />
        <div class="form-group">
          <button title="buscar Ultima NotificaciÃ³n" class="btn btn-outline-secondary w-100 mt-2 btn-sm" type="submit">
            Buscar
          </button>
        </div>
        </form>
    </div>
  </div>

  <!-- Tabla responsiva de expedientes -->
  {{#if expedientes.length}}
  <div class="table-responsive rounded shadow-sm border">
    <table class="table table-striped table-bordered align-middle text-nowrap">
      <thead class="table-primary text-dark text-center">        
          <tr style="background-color: rgb(221, 157, 18);;text-shadow: 1px 1px 2px black">
            <td>Juzgado</td>
            <td>secretaria</td>
            <td>NÂº Expediente</td>
            <td>Tipo</td>
            <td>Estado</td>
            <td>UltimaNotif</td>
            <td>Opciones</td>
            <td>Extras</td>
          </tr>        
      </thead>
      <tbody>
        {{#each expedientes}}
        <tr>
          {{!-- <td>{{ _id }}</td> --}}
            <td style="text-transform: lowercase;">{{ secretaria }}</td>
            <td>{{ juzgado }}</td>
            <td>{{ numexpediente }}</td>
            <td style="text-transform: lowercase;">{{ tipo }}</td>
            <td style="text-transform: lowercase;color:yellow;">{{ estado }}</td>
            <td style="text-transform: lowercase;color:green; font-weight: bold;">{{ ultimanotificacion }}</td>
            <td>
              <a class="dropdown-item" href="/expedientes/list/{{_id}}"
                style="color:rgb(24, 211, 33);font-weight: bold;text-shadow: 1px 1px 2px black;">
                Info Expediente
              </a>
            </td>
            <td>
              <a class="dropdown-item " href="/expedientes/edit/{{_id}}"
                style="color:rgb(165, 196, 28);font-weight: bold;text-shadow: 1px 1px 2px black;">
                Editar Exped.
              </a>
              <form onSubmit="return confirm('Desea enviar Papelera?')" style=""
                action="/expedientes/marcadelete/{{_id}}?_method=PUT" method="POST">
                <input type="hidden" name="_method" value="PUT">
                <button class="btn btn-danger btn-block btn-sm" type="submit">
                  Borrar
                </button>
              </form>
            </td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
  {{else}}
  <div class="alert alert-warning text-center mt-5" role="alert">
    ðŸš« No existen expedientes registrados.
  </div>
  {{/if}}
</div>